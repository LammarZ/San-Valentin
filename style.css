const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let hearts = [];

/* DIBUJAR TRONCO */
function drawTree() {
  ctx.fillStyle = "#7b2d12";
  ctx.fillRect(canvas.width - 250, canvas.height - 300, 40, 300);
}

/* CREAR CORAZONES */
function createHearts() {
  for (let i = 0; i < 200; i++) {
    hearts.push({
      x: canvas.width - 230 + Math.random() * 200,
      y: canvas.height - 320 - Math.random() * 200,
      size: Math.random() * 15 + 8,
      color: `hsl(${Math.random() * 360}, 70%, 60%)`
    });
  }
}

/* DIBUJAR CORAZON */
function drawHeart(x, y, size, color) {
  ctx.fillStyle = color;
  ctx.beginPath();
  ctx.moveTo(x, y);
  ctx.bezierCurveTo(x - size/2, y - size/2, x - size, y + size/3, x, y + size);
  ctx.bezierCurveTo(x + size, y + size/3, x + size/2, y - size/2, x, y);
  ctx.fill();
}

function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawTree();
  hearts.forEach(h => drawHeart(h.x, h.y, h.size, h.color));
  requestAnimationFrame(animate);
}

createHearts();
animate();

/* CONTADOR DESDE 8 JUNIO 2023 */
const inicio = new Date("2023-06-08T00:00:00");

function actualizarContador() {
  const ahora = new Date();
  const diferencia = ahora - inicio;

  const dias = Math.floor(diferencia / (1000 * 60 * 60 * 24));
  const horas = Math.floor((diferencia / (1000 * 60 * 60)) % 24);
  const minutos = Math.floor((diferencia / (1000 * 60)) % 60);
  const segundos = Math.floor((diferencia / 1000) % 60);

  document.getElementById("tiempo").innerHTML =
    `${dias} d√≠as ${horas}h ${minutos}m ${segundos}s`;
}

setInterval(actualizarContador, 1000);
actualizarContador();
